<!doctype html><html lang=zh-hans><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.0.0-beta.3 for Hugo"><script src="https://www.googleoptimize.com/optimize.js?id=OPT-T64TWGJ"></script><meta name=author content="忐忑"><meta name=description content="平时学习中,比较重要的知识点,记下来备忘"><meta name=keywords content="学习笔记,笔记,Linux"><link rel=alternate hreflang=zh-hans href=https://twbworld.github.io/post/note/><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta name=theme-color content="#1565c0"><link rel=stylesheet href=https://cdn.staticfile.org/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous media=print onload="this.media='all'"><link rel=stylesheet href=https://cdn.staticfile.org/highlight.js/10.2.0/styles/dracula.min.css crossorigin=anonymous title=hl-light media=print onload="this.media='all'"><link rel=stylesheet href=https://cdn.staticfile.org/highlight.js/10.2.0/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload="this.media='all'" disabled><link rel=stylesheet href=https://cdn.staticfile.org/leaflet/1.7.1/leaflet.min.css integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin=anonymous media=print onload="this.media='all'"><script src=https://cdn.staticfile.org/lazysizes/5.2.2/lazysizes.min.js integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin=anonymous async></script><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload="this.media='all'"><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/twbworld/twbworld.GitHub.io@gh-pages/css/wowchemy.dd4198da94b96ba1828f84ef95a066d2.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165300316-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}function trackOutboundLink(a,b){gtag('event','click',{event_category:'outbound',event_label:a,transport_type:'beacon',event_callback:function(){b!=='_blank'&&(document.location=a)}}),console.debug("Outbound link clicked: "+a)}function onClickCallback(a){if(a.target.tagName!=='A'||a.target.host===window.location.host)return;trackOutboundLink(a.target,a.target.getAttribute('target'))}gtag('js',new Date),gtag('config','UA-165300316-1',{}),gtag('set',{cookie_flags:'SameSite=None;Secure'}),document.addEventListener('click',onClickCallback,!1)</script><script>(function(b,d,e,a,g){b[a]=b[a]||[],b[a].push({'gtm.start':(new Date).getTime(),event:'gtm.js'});var f=d.getElementsByTagName(e)[0],c=d.createElement(e),h=a!='dataLayer'?'&l='+a:'';c.async=!0,c.src='https://www.googletagmanager.com/gtm.js?id='+g+h,f.parentNode.insertBefore(c,f)})(window,document,'script','dataLayer','GTM-P8WL7G3')</script><link rel=manifest href=/index.webmanifest><link rel=icon type=image/png href=/images/icon_huf8f9e04b16a1b18d734a3b791d2e4cd6_136989_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/images/icon_huf8f9e04b16a1b18d734a3b791d2e4cd6_136989_180x180_fill_lanczos_center_2.png><link rel=canonical href=https://twbworld.github.io/post/note/><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/gh/twbworld/twbworld.GitHub.io@gh-pages/css/my.css><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@twbworld"><meta property="twitter:creator" content="@twbworld"><meta property="og:site_name" content="忐忑の博客"><meta property="og:url" content="https://twbworld.github.io/post/note/"><meta property="og:title" content="学习笔记 | 忐忑の博客"><meta property="og:description" content="平时学习中,比较重要的知识点,记下来备忘"><meta property="og:image" content="https://twbworld.github.io/media/avatar.jpg"><meta property="twitter:image" content="https://twbworld.github.io/media/avatar.jpg"><meta property="og:locale" content="zh-Hans"><meta property="article:published_time" content="2020-10-04T00:00:00+00:00"><meta property="article:modified_time" content="2021-05-22T20:57:43+08:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://twbworld.github.io/post/note/"},"headline":"学习笔记","datePublished":"2020-10-04T00:00:00Z","dateModified":"2021-05-22T20:57:43+08:00","author":{"@type":"Person","name":"忐忑"},"publisher":{"@type":"Organization","name":"忐忑の博客","logo":{"@type":"ImageObject","url":"https://twbworld.github.io/images/icon_huf8f9e04b16a1b18d734a3b791d2e4cd6_136989_192x192_fill_lanczos_center_2.png"}},"description":"平时学习中,比较重要的知识点,记下来备忘"}</script><title>学习笔记 | 忐忑の博客</title><script src=https://cdn.jsdelivr.net/gh/twbworld/twbworld.GitHub.io@gh-pages/js/vendor/live2d-widget/autoload.js></script></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class="page-wrapper
bg-image parallax
waifu-left" style=background-attachment:fixed><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P8WL7G3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script src=https://cdn.jsdelivr.net/gh/twbworld/twbworld.GitHub.io@gh-pages/js/wowchemy-init.min.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>搜索</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=搜索... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=搜索...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class=page-header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex" style=width:35%><a class=navbar-brand href=/>忐忑の博客</a></div><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>忐忑の博客</a></div><div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#hero><span></span></a></li><li class=nav-item><a class="nav-link active" href=/post/><span></span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2" style=display:block!important;text-align:right;width:35%;height:100%><li class=nav-item style=display:inline-block><a class="nav-link js-search" title=Search href=# aria-label=搜索><i class="fas fa-search big-icon" aria-hidden=true></i></a></li><li class=nav-item style=display:inline-block><a class=nav-link title="@twbworld on github" href=https://github.com/twbworld target=_blank rel=noopener><i class="fab fa-github big-icon" aria-hidden=true></i></a></li></ul></div></nav></div><div class=page-body><article class=article><div class="article-container pt-3 post-article-header-head"><h1>学习笔记</h1><div class=article-metadata><span class=article-date>最近更新于
2021-05-22</span>
<span class=middot-divider></span><span class=article-reading-time>17 分钟阅读时长</span></div></div><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar post-scroll"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#扩展知识>扩展知识</a><ul><li><a href=#双系统制作>双系统制作</a></li></ul></li><li><a href=#常用-命令快捷键>常用 命令&&快捷键</a><ul><li><a href=#linux>Linux</a></li><li><a href=#git>Git</a></li><li><a href=#vim>Vim</a></li><li><a href=#sublime>Sublime</a></li><li><a href=#vimium>Vimium</a></li><li><a href=#chrome>chrome</a></li><li><a href=#windows>windows</a></li></ul></li><li><a href=#linux-1>Linux</a></li><li><a href=#git-1>Git</a></li><li><a href=#编译安装>编译安装</a></li><li><a href=#centos指定版本安装>CentOS指定版本安装</a></li><li><a href=#网络>网络</a></li><li><a href=#隧道>隧道</a></li><li><a href=#nftables>Nftables</a></li><li><a href=#ftp>Ftp</a></li><li><a href=#nginx>Nginx</a></li><li><a href=#数据库读写分离>数据库读写分离</a></li><li><a href=#数据库>数据库</a></li><li><a href=#php>PHP</a></li><li><a href=#前端>前端</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-10 py-md-3 pl-md-3 docs-content" role=main><div class="article-container post-article-container"><div class=article-style><h2 id=扩展知识>扩展知识</h2><h3 id=双系统制作>双系统制作</h3><blockquote><p><a href=https://blog.csdn.net/mengxiangjia_linxi/article/details/78965103>https://blog.csdn.net/mengxiangjia_linxi/article/details/78965103</a></p></blockquote><ol><li>电脑已有 <code>Windows系统</code> 的前提下,用 <code>UltraISO</code> 把 <code>centos系统</code> 刻入U盘</li><li>启动系统U盘(新机用 <code>uefi启动</code> ),在系统选择页面,按下 <code>tab健</code> 修改启动项,把 <code>LABEL=CentOS\x207\x20x86_64</code> 改为 <code>/dev/sdb4</code> (不一定是 <code>sdb4</code> ,可能是 <code>sda4</code> , <code>sdc4</code> 等等,具体百度)</li><li>安装系统界面,选择硬盘,自动分配分区得以回收空间</li><li>重做 <code>PE启动盘</code> ,启动盘用 <code>NTBOOT</code> 软件做 <code>双系统引导修复</code></li></ol><h2 id=常用-命令快捷键>常用 命令&&快捷键</h2><h3 id=linux>Linux</h3><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>..</td><td>上一级目录</td></tr><tr><td>cd -</td><td>上一次目录</td></tr><tr><td>ctrl+C</td><td>强制中断</td></tr><tr><td>ctrl+U</td><td>清除输入命令</td></tr><tr><td>!v</td><td>执行上一条以&rsquo;v&rsquo;开头的命令</td></tr><tr><td>ll</td><td>ls -l 缩写</td></tr><tr><td>2>&1</td><td>输出错误</td></tr><tr><td>|grep</td><td>过滤结果</td></tr><tr><td>ctrl+a/e</td><td>命令最前/后</td></tr><tr><td>clear</td><td>清屏(或ctrl+L)</td></tr><tr><td>pwd</td><td>当前目录</td></tr><tr><td>cat</td><td>查看文件内容</td></tr><tr><td>mkdir/mv/cp/rm</td><td>文件名操作</td></tr><tr><td>\cp</td><td>当有同名文件,不需要输"Y"即可覆盖</td></tr><tr><td>useradd</td><td>创建新用户</td></tr><tr><td>which</td><td>查找命令</td></tr><tr><td>chown</td><td>设置文件拥有者</td></tr><tr><td>chmod</td><td>设置u/g/o权限</td></tr><tr><td>setfacl -R -m u:apache:rwx /var</td><td>设置单独用户的权限(getfacl查看)</td></tr><tr><td>chattr</td><td>设置文件属性,如设置成禁止删除文件</td></tr><tr><td>ps -ef(ps aux)</td><td>查看所有进程</td></tr><tr><td>pstree -p</td><td>查看进程树</td></tr><tr><td>pkill httpd</td><td>关闭某进程(或killall)</td></tr><tr><td>uptime</td><td>计算机负载</td></tr><tr><td>top</td><td>实时负载(可安装htop加强版)</td></tr><tr><td>df -h</td><td>磁盘占用</td></tr><tr><td>du -h &ndash;max-depth=0 * (du -sh *)</td><td>目录下各个文件大小</td></tr><tr><td>pkill -kill -t pts/1</td><td>强退指定用户</td></tr><tr><td>who</td><td>在线用户(或缩写w)</td></tr><tr><td>last</td><td>用户登录历史记录</td></tr><tr><td>id</td><td>查看用户所在的组</td></tr><tr><td>lsof -i:80</td><td>查看端口</td></tr><tr><td>netstat -antup | grep nginx</td><td>查看进程或端口等</td></tr><tr><td>man</td><td>命令帮助(可安装中文软件)</td></tr><tr><td>curl ifconfig.me</td><td>查看公网ip</td></tr><tr><td>rpm -qa|grep</td><td>查看应用程序</td></tr><tr><td>pkill -HUP nginx</td><td>系统级别重载配置文件</td></tr><tr><td>systemctl status nginx.service</td><td>查看状态(或service nginx status)</td></tr><tr><td>chkconfig iptables off</td><td>永久关闭防火墙</td></tr><tr><td>chkconfig iptables on</td><td>永久关闭后重启</td></tr><tr><td>ln -s</td><td>软连接</td></tr><tr><td>composer dump-autoload</td><td>可解决加载失败</td></tr><tr><td>nohup &lt;shell></td><td>在后台运行shell命令</td></tr><tr><td>tree -LNFC 2</td><td>tree软件常用命令</td></tr><tr><td>tar -xaf</td><td>识别压缩文件类型,进行解压(-caf)</td></tr><tr><td>unzip -O cp936</td><td>zip文件解压避免乱码</td></tr><tr><td>scp -r /var <a href=mailto:root@127.0.0.1>root@127.0.0.1</a>:/var/</td><td>目录传输</td></tr><tr><td>find / -type f -name &ldquo;*.txt&rdquo; | xargs grep &ldquo;hello&rdquo;</td><td>查找文件内容</td></tr><tr><td>cat &lt;filename> | openssl dgst -sha256 -binary | openssl base64 -A</td><td>计算文件sha256校验值(css校验方法:<code>&lt;link href="filename.css" integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ="></code>)</td></tr><tr><td>sha256sum filename</td><td>计算文件md5校验值</td></tr><tr><td>docker container list -aq |xargs docker container rm</td><td>docker清理容器(同样效果 <code>docker container prune</code>)</td></tr><tr><td>docker volume ls -q |xargs docker volume rm</td><td>docker清理卷(同样效果 <code>docker volume prune</code>)</td></tr></tbody></table><h3 id=git>Git</h3><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><code>git diff &lt;file></code></td><td>工作区版本库对比</td></tr><tr><td><code>git diff &lt;commit-id> &lt;commit-id> --stat</code></td><td>比较两个版本变化了的文件</td></tr><tr><td><code>git commit --amend</code></td><td>修改已commit的备注</td></tr><tr><td><code>git commit –am &lt;备注></code></td><td>直接跳过add命令</td></tr><tr><td><code>git reset --hard HEAD</code></td><td>还原最新版</td></tr><tr><td><code>git reset --hard &lt;commit-id></code></td><td>还原指定版</td></tr><tr><td><code>git reset HEAD &lt;file></code></td><td>放弃暂存区的修改</td></tr><tr><td><code>git checkout -- &lt;file></code></td><td>放弃工作区的修改</td></tr><tr><td><code>git checkout . && git clean -df</code></td><td>清除所有新增的文件目录</td></tr><tr><td><code>git checkout –b &lt;name></code></td><td>创建并切换分支</td></tr><tr><td><code>git branch -D &lt;name></code></td><td>丢弃未合并的分支</td></tr><tr><td><code>git branch -r -d origin/&lt;name> && git push origin :&lt;name></code></td><td>删除远程分支</td></tr><tr><td><code>git mergetool</code></td><td>解决冲突的合并工具</td></tr><tr><td><code>git tag -a &lt;name> -m &lt;备注> &lt;commit-id></code></td><td>创建并指定标签信息</td></tr><tr><td><code>git show &lt;name></code></td><td>查看标签信息</td></tr><tr><td><code>git stash</code></td><td>保存当前工作现场</td></tr><tr><td><code>git stash pop</code></td><td>恢复并删除工作现场</td></tr><tr><td><code>git stash list</code></td><td>查看工作现场</td></tr><tr><td><code>git stash apply &lt;stash@{0}></code></td><td>恢复工作现场</td></tr><tr><td><code>git stash drop &lt;stash@{0}></code></td><td>删除工作现场</td></tr><tr><td><code>git reflog &lt;file></code></td><td>命令历史</td></tr><tr><td><code>git revert &lt;commit-id></code></td><td>撤销某个版本</td></tr><tr><td><code>git cherry-pick &lt;commit-id></code></td><td>提取某个分支的某个版本到当前分支</td></tr><tr><td><code>git check-ignore -v &lt;file></code></td><td>检查哪个规则忽略了文件</td></tr><tr><td><code>git rm -rf --cached . && git add -A</code></td><td>清徐缓存,用于更新gitignore</td></tr><tr><td><code>git submodule add &lt;远程项目地址> &lt;路径></code></td><td>添加子模块</td></tr><tr><td><code>git submodule update --init --recursive</code></td><td>下载所有子模块</td></tr><tr><td><code>git submodule update --remote</code></td><td>更新所有子模块</td></tr><tr><td><code>git worktree add ../folder master</code></td><td>关联某分支到目录</td></tr><tr><td><code>git remote show origin</code></td><td>详细的远程分支的信息</td></tr><tr><td><code>git log --oneline --graph --decorate --all -9</code></td><td>可视化显示版本树</td></tr><tr><td><code>git config --global alias.lg "log --color --graph --all --oneline --decorate --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an>%Creset' --abbrev-commit"</code></td><td>可视化显示版本树配置别名</td></tr><tr><td><code>git config --global core.filemode false</code></td><td>关闭git对文件权限的监视</td></tr><tr><td><code>git config --global core.quotepath false</code></td><td>正常显示中文文件名</td></tr><tr><td><code>git config --global color.ui true</code></td><td>彩色显示</td></tr></tbody></table><h3 id=vim>Vim</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>!&lt;shell></td><td>执行系统命令</td></tr><tr><td>u</td><td>后退</td></tr><tr><td>Ctrl + r</td><td>前进</td></tr><tr><td>i/I/a/A/o/O</td><td>前/行首/后/行尾/上行/下行 插入</td></tr><tr><td>b/e/^/$/H/M/L/gg/G</td><td>移动光标到 跳前/跳后/行首/行尾/窗头/窗中/窗尾/头部/尾部</td></tr><tr><td>Ctrl + b/f/d/u</td><td>翻一页/半页</td></tr><tr><td>D</td><td>删除到行尾</td></tr><tr><td>dG</td><td>向下删除</td></tr><tr><td>dd</td><td>删除当前行</td></tr><tr><td>yy</td><td>复制</td></tr><tr><td>p</td><td>粘贴</td></tr><tr><td>ddp</td><td>与下行互换位置</td></tr><tr><td>yyp</td><td>新增一行</td></tr><tr><td>ggvG</td><td>全选</td></tr><tr><td>set number</td><td>显示行数</td></tr><tr><td>vim +X &lt;filename></td><td>文件加密</td></tr><tr><td>:&lt;number></td><td>跳到指定行</td></tr><tr><td>/&lt;name></td><td>搜索(按 n/N 向 下/上 查找)</td></tr></tbody></table><h3 id=sublime>Sublime</h3><table><thead><tr><th>快捷键</th><th>描述</th></tr></thead><tbody><tr><td>Ctrl+Shift+L</td><td>所有选中的行,在行后后出现光标</td></tr><tr><td>Ctrl+Shift+M</td><td>选中括号里的内容</td></tr><tr><td>Ctrl+M</td><td>光标在括号前后跳</td></tr><tr><td>Ctrl+Shift+[ / ]</td><td>隐藏/显示 内容</td></tr><tr><td>Ctrl+J</td><td>多行成一行</td></tr><tr><td>Ctrl+KK</td><td>删除行后的内容</td></tr><tr><td>Ctrl+K+U / L</td><td>选中的内容 大写/小写</td></tr><tr><td>Ctrl+F2</td><td>标记行</td></tr><tr><td>F6</td><td>检错</td></tr><tr><td>Alt+.</td><td>补充标签</td></tr><tr><td>Alt+数字</td><td>跳转tag</td></tr><tr><td>shift+pgup</td><td>向下选择</td></tr></tbody></table><h3 id=vimium>Vimium</h3><table><thead><tr><th>快捷键</th><th>描述</th></tr></thead><tbody><tr><td>o</td><td>搜索</td></tr><tr><td>j/k</td><td>滚动</td></tr><tr><td>gg/G</td><td>头/底部</td></tr><tr><td>d/u</td><td>翻页</td></tr><tr><td>f</td><td>打开连接</td></tr><tr><td>x/X</td><td>关闭/恢复标签页</td></tr><tr><td>J/K</td><td>上/下一个标签页</td></tr><tr><td>yy</td><td>复制链接</td></tr><tr><td>H/L</td><td>后退/前进记录</td></tr><tr><td>p</td><td>刷新</td></tr><tr><td>t</td><td>新建标签页</td></tr></tbody></table><h3 id=chrome>chrome</h3><table><thead><tr><th>快捷键</th><th>描述</th></tr></thead><tbody><tr><td>Ctrl+0</td><td>恢复100%</td></tr><tr><td>Ctrl+j</td><td>下载页</td></tr><tr><td>Ctrl+Shift+Delete</td><td>清除数据</td></tr><tr><td>Ctrl+u</td><td>html源码</td></tr><tr><td>chrome://net-internals/#dns</td><td>清除DNS</td></tr></tbody></table><h3 id=windows>windows</h3><table><thead><tr><th>快捷键</th><th>描述</th></tr></thead><tbody><tr><td>Win+←</td><td>小化</td></tr><tr><td>win+v</td><td>粘贴板</td></tr><tr><td>Win+i</td><td>设置页</td></tr><tr><td>Shift+Ctrl+Esc</td><td>任务管理器</td></tr><tr><td>Alt+F4</td><td>关机</td></tr><tr><td>Alt+1/Enter/双击</td><td>查看文件属性</td></tr><tr><td>Alt+↑</td><td>上一级目录</td></tr><tr><td>Alt+2(Shift+Ctrl+n)</td><td>新建文件夹</td></tr><tr><td>右击+v+d</td><td>隐藏图标(等等操作)</td></tr><tr><td>ctrl+win+D</td><td>新建桌面</td></tr><tr><td>ctrl+win+←</td><td>返回桌面(老板键)</td></tr></tbody></table><h2 id=linux-1>Linux</h2><ul><li>端口号&lt;1024为系统预留端口</li><li>uid &lt; 500 为系统用户</li><li>非<code>root</code>用户不能监听&lt;1024的端口(所以一般<code>root</code>启动<code>nginx</code>)</li><li>nobody为Linux非登录用户,其作为nginx运行用户可保证安全</li><li><code>Linux</code>的共享:<code>NFS</code>协议</li><li><code>windows</code>与<code>linux</code>共享:<code>SMB</code>协议(<code>Samba</code>软件)</li></ul><table><thead><tr><th>权限</th><th>符号</th><th>描述</th></tr></thead><tbody><tr><td>可执行</td><td>x</td><td>可以进入该目录,无法读取该目录中的内容</td></tr><tr><td>可执行可读</td><td>xr</td><td>可以进入该目录并读取该目录中的内容,不能创建文件</td></tr><tr><td>可执行可写</td><td>xw</td><td>可以创建文件但是不能读取</td></tr></tbody></table><ul><li>目录描述 :</li></ul><p><img src=https://cdn.jsdelivr.net/gh/twbworld/hosting@master/img/20210404165626.jpg alt></p><ul><li>Linux环境安装流程 :<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>.bashrc命令别名
ufw防火墙关闭
静态ip
ali源
vim安装及.vimrc解决乱码
ssh安装及配置
samba安装及配置;用户:root;密码:root;
传项目文件
python升级
net-tools安装
htop安装
git安装及配置
tig安装
tree安装
screen安装
docker安装
docker-compose安装
golang安装
hugo安装
node安装
php安装
mysql安装

~/.vimrc配置
syntax on
set autoindent
set fileencodings<span style=color:#f92672>=</span>utf-8,gb2312,gb18030,gbk,ucs-bom,cp936,latin1
set enc<span style=color:#f92672>=</span>utf8
set fencs<span style=color:#f92672>=</span>utf8,gbk,gb2312,gb18030
set nu!

~/.bashrc配置
alias gs<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;git status&#39;</span>
alias lg<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;git log --color --graph --all --oneline  --decorate --pretty=format:&#34;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#34; --abbrev-commit&#39;</span>
alias hugo1314<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;hugo server --i18n-warnings --disableFastRender -D --bind 192.168.2.222 -p 1314 --baseURL=http://192.168.2.222:1314&#39;</span>
alias d<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;docker&#39;</span>
alias dps<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;docker ps --format &#34;table {{.ID}}\t{{.Names}}\t{{.Image}}\t{{.Status}}&#34;&#39;</span>
alias de<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;docker exec -it&#39;</span>
alias tree<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;tree -NFC&#39;</span>
alias lt<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;tree -aNFCL&#39;</span>
alias ll<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ls -alF&#39;</span>
alias la<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ls -A&#39;</span>
alias l<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ls -CF&#39;</span>
alias rm<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;rm -i&#39;</span>
alias cp<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;cp -i&#39;</span>
alias mv<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;mv -i&#39;</span>

开启BBR
echo <span style=color:#e6db74>&#34;net.core.default_qdisc=fq&#34;</span> &gt;&gt; /etc/sysctl.conf
echo <span style=color:#e6db74>&#34;net.ipv4.tcp_congestion_control=bbr&#34;</span> &gt;&gt; /etc/sysctl.conf
sysctl -p
lsmod | grep bbr
</code></pre></div></li></ul><h2 id=git-1>Git</h2><ul><li><p>初始配置Git</p><blockquote><ol><li>设置本地用户和邮箱
<code>git config --global user.name &lt;your_name> && git config --global user.email &lt;your_email></code></li><li>本地生成公钥
<code>ssh-keygen -t rsa -C &lt;your_email></code></li><li>找到公钥,复制到github账号(即添加过公钥的用户才被允许管理github项目)</li><li>测试公钥
<code>ssh -T git@github.com</code></li><li>到github创建项目</li><li>本地创建项目并初始化
<code>git init</code></li><li>关联远程库和本地
<code>git remote add &lt;自定义远程仓库名,如origin> &lt;远程项目地址></code></li><li>可查看本地关联的所有仓库主机
<code>git remote -v 或者 git remote show origin</code></li><li>把项目添加到缓存区
<code>git add . 和 git commit –m &lt;备注></code></li><li>提交项目到origin仓库的master分支
<code>git push origin master (添加"--tags"可同时上传tag)</code></li></ol></blockquote></li><li><p>git hook :</p><blockquote><ul><li>第三方仓库git hook</li><li>服务器部署git裸仓库
<a href=http://kongfangyu.com/2016/02/12/git-deploy>http://kongfangyu.com/2016/02/12/git-deploy</a></li></ul></blockquote></li><li><p>备注规范 :</p><blockquote><ul><li>feat: 新功能</li><li>fix: 修复 bug</li><li>perf: 提升性能的改动</li><li>refactor: bug 修复和添加新功能之外的代码改动,重构大改动</li><li>chore: 其他修改,构建过程或辅助工具和库（如文档生成）的更改</li><li>docs: 文档变动</li><li>style: 格式调整，对代码实际运行没有改动，例如添加空行、格式化等</li><li>test: 添加或修正测试代码</li><li>ci: 持续集成相关文件修改</li><li>release: 发布新版本</li><li>revert: 恢复上一次提交</li></ul></blockquote></li></ul><h2 id=编译安装>编译安装</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>
<span style=color:#75715e># 配置</span>
./configure --prefix<span style=color:#f92672>=</span>/usr/local/nginx
<span style=color:#75715e># 清除编译文件</span>
make clean
<span style=color:#75715e># 编译</span>
make
<span style=color:#75715e># 安装</span>
make install
<span style=color:#75715e># 软连接</span>
ln -s /usr/local/nginx/sbin/nginx /usr/bin/nginx
<span style=color:#75715e># 开机自启</span>
vim /etc/init.d/nginx <span style=color:#f92672>&amp;&amp;</span> chmod a+x /etc/init.d/nginx
<span style=color:#75715e># 加入chkconfig管理列表</span>
chkconfig --add /etc/init.d/nginx
chkconfig nginx on
systemctl status nginx.service

</code></pre></div><h2 id=centos指定版本安装>CentOS指定版本安装</h2><pre><code>1. 到官网找到对应版本的rpm包,如:http://nginx.org/packages
2. 下载rpm包:wget http://nginx.org/packages/.../xxx.rpm
3. 安装:yum install -y xxx.rpm
4. /etc/rc.d/rc.local是系统启动后执行的文件,可在里添加自启的命令(但不推荐用这方式)
5. /etc/profile是系统变量的文件
</code></pre><h2 id=网络>网络</h2><ul><li><p><code>TCP</code> :需要三次握手,建立了 <code>TCP</code> 虚拟通道,之后, <code>TCP</code> 运输 <code>HTTP流</code></p></li><li><p><code>SSL</code> : 位于 <code>TCP</code> 与 <code>HTTP</code> 之间,作为 <code>HTTP</code> 的安全供应商，全权负责 <code>HTTP</code> 的安全加密工作。</p></li><li><p><code>TLS</code> : 在 <code>SSL3.0</code> 版本的基础上，重新设计并命名了这个协议，其全新的名字为 <code>TLS</code> ,形成: <code>TCP连接时间</code> + <code>TLS 连接时间</code> + <code>HTTP交易时间</code></p></li><li><p><code>HTTPS</code> : 通常将 <code>TLS</code> 安全保护的 <code>HTTP</code> 通信，称之为 <code>HTTPS</code> ，以区别于没有 <code>TLS</code> 安全防护的 <code>HTTP</code> 明文通信。</p></li><li><p><code>HTTP/2</code> : 第一次页面与第二次页面都是同一个网站服务器,重用第一个页面 <code>TCP</code> 连接</p></li><li><p><code>QUIC</code> : <code>http/2</code> 去掉 <code>TCP</code> ,改用不需要连接的 <code>UDP</code> ,形成: <code>UDP / QUIC</code> ,第一次 <code>2.5RTT</code> ,完成 <code>QUIC</code> 交易的连接的 <code>Session ID</code> 会缓存在浏览器内存里,第二次,使用 <code>Session ID</code> ,重连 <code>TLS</code> 连接是一个 <code>0 RTT</code> 事件</p></li><li><p><code>HTTP/3</code> : 把 <code>QUIC</code> 与 <code>HTTP</code> 分离,形成: <code>UDP / QUIC / HTTP</code></p></li><li><p>使用 <code>IPv4</code> 进行路由，使用 <code>TCP</code> 进行连接层面的流量控制，使用 <code>SSL/TLS</code> 协议实现传输安全，使用 <code>DNS</code> 进行域名解析，使用 <code>HTTP</code> 进行应用数据的传输。</p></li><li><p><code>IP</code> 是网络层</p></li><li><p><code>TCP</code> 是传输层</p></li><li><p>网络层 <code>ARP</code> : 保存 <code>IP</code> 与 <code>mac</code> 地址的映射列表,没有则会广播</p></li><li><p><code>TCP/IP</code> 连接 + <code>http</code> 传输 &ndash;> 网卡 &ndash;> 内核(通过资源包的四元组信息,信息的其中之二是访问的 <code>IP+端口</code> ) &ndash;> <code>socket</code>(它是文件系统,是资源,储存着端对端的四元组信息,被进程使用) &ndash;> 进程</p></li><li><p><code>socket</code> 是网络与进程的中介</p></li></ul><h2 id=隧道>隧道</h2><blockquote><p><a href=https://www.zhihu.com/question/39382183>https://www.zhihu.com/question/39382183</a></p></blockquote><ul><li>隧道是一种技术,有 <code>SSH隧道</code> 和 <code>http隧道</code> 和 <code>UDP隧道(p2p)</code></li><li>隧道的中间服务器是不参与流量分析的,只用来传输流量,只是用于简单的过度</li><li>代理是可以参与流量的处理的,比如 <code>http代理</code></li><li>但 <code>http代理</code> 不能传输 <code>https流量</code> ,因为 <code>https</code> 是端对端的加密,没有中间人</li><li>为了解决不能代理 <code>https流量</code> , <code>http隧道</code> 配合 <code>http</code> 的 <code>CONNECT报文</code> 解决了这个问题;</li><li><code>SOCKS5</code> 方式可以代替 <code>CONNECT报文</code> 的方法, <code>CONNECT报文</code> 只能用于 <code>http流量</code> ,而 <code>SOCKS5</code> 可以传输任意协议,如 <code>https</code> 或 <code>ftp</code></li><li>大致原理: <code>本地---(1)--->代理---(2)--->服务器</code>; 本地与代理建立动态端口隧道,过程<code>(1)</code> 使用 <code>SOCKS5</code> 或 <code>http</code> 的 <code>CONNECT报文(包裹着https流量)</code> , 过程 <code>(2)</code> 使用 <code>https</code>;</li></ul><blockquote><p><a href=https://www.zsythink.net/archives/2450>https://www.zsythink.net/archives/2450</a></p></blockquote><ol><li><p>动态转发(科学上网)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># socks5代理的建立</span>
ssh -N -f -D 127.0.0.1:6666 root@121.199.63.39

<span style=color:#75715e># 原理:本地(127.0.0.1:6666)与代理(121.199.63.39)服务器建立隧道后,本地(127.0.0.1)使用socks5协议在外层加密https协议,通过本地代理端口(6666)-(隧道)-代理(121.199.63.39)-https访问服务端(https://www.google.com)</span>
curl -x socks5://127.0.0.1:6666 https://www.google.com <span style=color:#75715e>#http为例</span>
ssh -o ProxyCommand<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;nc -X 5 -x 127.0.0.1:6666 %h %p&#34;</span> https://www.google.com <span style=color:#75715e>#ssh为例,参数-X默认socks5</span>
</code></pre></div></li><li><p>本地转发</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>ssh -N -f -L 192.168.2.2:6666:121.199.63.39:22 root@121.199.63.39
</code></pre></div></li><li><p>远程转发</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>ssh -N -f -R 121.199.63.39:6666:127.0.0.1:22 root@121.199.63.39
</code></pre></div></li><li><p>通过 <code>121.199.63.39</code> 的 <code>22</code> 端口,登录 <code>121.199.63.39localhost</code> 的 <code>6666</code> 端口</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>ssh -J root@121.199.63.39:22 -p6666 localhost
</code></pre></div></li></ol><h2 id=nftables>Nftables</h2><p>防火墙配置例子 :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># my.nft</span>
table inet filter <span style=color:#f92672>{</span>
    chain input <span style=color:#f92672>{</span>
        type filter hook input priority 0; policy drop;
        ct state established,related accept
        iif <span style=color:#e6db74>&#34;lo&#34;</span> accept comment <span style=color:#e6db74>&#34;一律接受本地环回&#34;</span>
        ct state invalid drop
        ip protocol icmp icmp type echo-request ct state new accept
        ip protocol udp ct state new jump UDP
        ip protocol tcp tcp flags &amp; <span style=color:#f92672>(</span>fin | syn | rst | ack<span style=color:#f92672>)</span> <span style=color:#f92672>==</span> syn ct state new jump TCP
        ip protocol udp reject
        ip protocol tcp reject with tcp reset
        meta nfproto ipv4 counter packets <span style=color:#ae81ff>0</span> bytes <span style=color:#ae81ff>0</span> reject with icmp type prot-unreachable
    <span style=color:#f92672>}</span>

    chain forward <span style=color:#f92672>{</span>
        type filter hook forward priority 0; policy drop;
    <span style=color:#f92672>}</span>

    chain output <span style=color:#f92672>{</span>
        type filter hook output priority 0; policy accept;
    <span style=color:#f92672>}</span>

    chain TCP <span style=color:#f92672>{</span>
        tcp dport ssh ct state new limit rate 15/minute accept comment <span style=color:#e6db74>&#34;避免对SSH施加暴力&#34;</span>
        tcp dport <span style=color:#f92672>{</span> http, https, mysql <span style=color:#f92672>}</span> accept comment <span style=color:#e6db74>&#34;80,443,3306&#34;</span>
        tcp dport domain accept comment <span style=color:#e6db74>&#34;DNS:53&#34;</span>
        tcp dport <span style=color:#f92672>{</span> netbios-ns, netbios-dgm, netbios-ssn, microsoft-ds <span style=color:#f92672>}</span> accept comment <span style=color:#e6db74>&#34;Samba:137,138,139,445&#34;</span>
        tcp dport <span style=color:#f92672>{</span> xtel, xtelw <span style=color:#f92672>}</span> accept comment <span style=color:#e6db74>&#34;:Hugo:1313,1314&#34;</span>
        ip saddr <span style=color:#f92672>{</span> 192.168.2.100 <span style=color:#f92672>}</span> drop
    <span style=color:#f92672>}</span>

    chain UDP <span style=color:#f92672>{</span>
        udp dport domain accept
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

</code></pre></div><h2 id=ftp>Ftp</h2><ol><li>关闭防火墙</li><li>安装 <code>ftp</code></li><li>修改三份文件 <code>ftpusers</code> <code>user_list</code> <code>vsftpd.conf</code></li><li>重启 <code>ftp</code></li><li>防火墙配置文件允许 <code>21</code> 端口</li><li>开启防火墙</li><li><code>ftp</code> 限制用户访问目录思路:修改 <code>/etc/vsftpd/vsftpd.conf</code> 文件中 <code>chroot_local_user</code> , <code>chroot_list_enable</code> , <code>chroot_list_file</code> 三项; 修改用户默认进入的家目录,则修改 <code>/etc/passwd</code></li></ol><p><code>vsftpd.conf</code> 文件参考配置 :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>listen_ipv6<span style=color:#f92672>=</span>YES
pam_service_name<span style=color:#f92672>=</span>vsftpd
tcp_wrappers<span style=color:#f92672>=</span>YES
write_enable<span style=color:#f92672>=</span>YES
local_umask<span style=color:#f92672>=</span><span style=color:#ae81ff>022</span>             <span style=color:#75715e>#用户ftp创建目录的权限掩码,022即为755</span>
listen<span style=color:#f92672>=</span>NO                   <span style=color:#75715e>#监听,yes可能导致无法启动ftp</span>
anonymous_enable<span style=color:#f92672>=</span>NO         <span style=color:#75715e>#拒绝匿名用户</span>
local_root<span style=color:#f92672>=</span>/var/www/html    <span style=color:#75715e>#本地用户初始目录</span>
<span style=color:#75715e>#登录限制</span>
local_enable<span style=color:#f92672>=</span>YES
userlist_enable<span style=color:#f92672>=</span>YES
userlist_deny<span style=color:#f92672>=</span>NO
userlist_file<span style=color:#f92672>=</span>/etc/vsftpd/user_list
<span style=color:#75715e>#目录限制</span>
chroot_local_user<span style=color:#f92672>=</span>YES
chroot_list_enable<span style=color:#f92672>=</span>YES
chroot_list_file<span style=color:#f92672>=</span>/etc/vsftpd/chroot_list
allow_writeable_chroot<span style=color:#f92672>=</span>YES
</code></pre></div><h2 id=nginx>Nginx</h2><ul><li><p><code>Nginx</code> (web服务器)偏向于 <code>静态资源</code> ,处理高并发,可用 <code>反向代理</code> 从而实现 <code>负载均衡</code> (类似 <code>dns</code> )</p></li><li><p><code>Apache</code> 偏向于<code> PHP</code> 的动态资源,bug少稳定</p></li><li><p><code>负载均衡</code> 实现思路: <code>动静态资源分离</code> ,主服务器使用 <code>Nginx</code> ,动态资源则 <code>反向代理</code> 到本机或集群的 <code>Apache</code> 服务器(一台服务器安装两个 <code>Apache</code> 服务可防止 <code>宕机</code> )</p></li><li><p><code>linux</code> 有端口复用(套接字端口共享)功能( <code>nginx</code> 开启 <code>reuseport</code> );从内核层面做 <code>负载均衡</code> ,避免 <code>锁竞争</code> ( <code>惊群效应</code> ): <a href=https://www.zhihu.com/question/51618274>https://www.zhihu.com/question/51618274</a></p></li><li><p><code>Nginx</code> 启用 <code>PHP</code> 需要配置文件</p></li><li><p><code>Nginx</code> 等软件自启,需要参考官方的启动代码,添加到 <code>/etc/init.d/</code> 下</p></li><li><p><code>Nginx</code> 支持缓存</p></li><li><p><code>Nginx</code> 支持 <code>gzip</code></p></li><li><p>Nginx实现负载均衡需要源码的同步, 使用 <code>rsync</code> (或+ <code>sersync</code> )实现集群服务器源码同步,源服务器执行的命令:
<code>rsync -avH --progress --delete --exclude-from=/etc/exclude.txt --password-file=/etc/pw.txt /var/www/html/ username@192.168.43.175::module1</code></p><blockquote><p>其中按顺序是:含有忽略同步列表的 <code>exclude.txt</code> 文件,含有密码的 <code>pw.txt</code> 文件,源服务器的同步目录, <code>username</code> 用户名,ip地址,对应的模块
<a href=https://blog.51cto.com/chenfei123/1707746>https://blog.51cto.com/chenfei123/1707746</a></p></blockquote></li></ul><p><code>负载均衡</code> 和 <code>前后端分离</code> 配置 :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e>#后端应反向给Apache代理</span>
upstream proxys <span style=color:#f92672>{</span>
    server 127.0.0.1:8080 weight<span style=color:#f92672>=</span>2;
    server 192.168.43.175:9090 weight<span style=color:#f92672>=</span>3;
    ip_hash;
<span style=color:#f92672>}</span>
<span style=color:#75715e>#前端应反向给Nginx代理</span>
upstream proxys2 <span style=color:#f92672>{</span>
    server 127.0.0.1:8081 weight<span style=color:#f92672>=</span>3;
    server 192.168.43.175:9090 weight<span style=color:#f92672>=</span>2;
<span style=color:#f92672>}</span>
server <span style=color:#f92672>{</span>
    listen 80;
    server_name www.domain.top domain.top;
    index index.html index.htm index.php;
    location / <span style=color:#f92672>{</span>
        proxy_pass http://proxys;
        proxy_http_version 1.1;
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        add_header X-Slave $upstream_addr;
    <span style=color:#f92672>}</span>
    location ~* <span style=color:#ae81ff>\.</span><span style=color:#f92672>(</span>css|js|png|jpg|jpeg|gif|txt|ico<span style=color:#f92672>)</span>$|^~/static <span style=color:#f92672>{</span>
       proxy_pass http://proxys2;
       proxy_set_header Host $http_host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       add_header X-Slave $upstream_addr;
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#75715e>#前端请求代理的配置</span>
server <span style=color:#f92672>{</span>
    listen 8081;
    server_name www.domain.top domain.top;
    location / <span style=color:#f92672>{</span>
       root /var/www/html/tp/public;
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

</code></pre></div><p><code>缓存</code> 和 <code>gzip</code> 配置 :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>http <span style=color:#f92672>{</span>

  <span style=color:#75715e># 开启缓存</span>
  proxy_connect_timeout 10;
  proxy_read_timeout 180;
  proxy_send_timeout 5;
  proxy_buffer_size 16k;
  proxy_buffers <span style=color:#ae81ff>4</span> 32k;
  proxy_busy_buffers_size 96k;
  proxy_temp_file_write_size 96k;
  proxy_temp_path /tmp/temp_dir;
  proxy_cache_path /tmp/cache levels<span style=color:#f92672>=</span>1:2 keys_zone<span style=color:#f92672>=</span>cache_one:100m inactive<span style=color:#f92672>=</span>1d max_size<span style=color:#f92672>=</span>10g;

  server
  <span style=color:#f92672>{</span>
      listen <span style=color:#ae81ff>8081</span> reuseport;
      server_name localhost;
      root /usr/share/nginx/tp/public/;

      location /
      <span style=color:#f92672>{</span>
      <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>


  server
  <span style=color:#f92672>{</span>
      <span style=color:#75715e>#开启gzip压缩资源</span>
      gzip  on;
      gzip_vary on;
      gzip_proxied any;
      gzip_comp_level 6;
      gzip_buffers <span style=color:#ae81ff>16</span> 8k;
      gzip_http_version 1.0;
      gzip_min_length 100;
      gzip_types text/plain text/css application/javascript application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/vnd.ms-fontobject application/x-font-ttf font/opentype image/svg+xml image/x-icon;

      <span style=color:#75715e>#资源文件缓存</span>
      location ~* <span style=color:#ae81ff>\.</span><span style=color:#f92672>(</span>css|js|json|png|jpg|jpeg|gif|txt|ico|bmp|swf<span style=color:#f92672>)</span>$|^~/static/
      <span style=color:#f92672>{</span>
          proxy_pass http://127.0.0.1:8081;
          proxy_redirect off;
          proxy_set_header Host $host;
          proxy_cache cache_one; <span style=color:#75715e>#cache_one在http设置层proxy_cache_path定义</span>
          proxy_cache_valid <span style=color:#ae81ff>200</span> <span style=color:#ae81ff>302</span> 24h;
          proxy_cache_valid <span style=color:#ae81ff>301</span> 30d;
          proxy_cache_valid any 5m;
          expires 90d;
          add_header wall  <span style=color:#e6db74>&#34;hey!这文件进行了缓存和压缩哟!&#34;</span>;
      <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>

<span style=color:#f92672>}</span>
</code></pre></div><h2 id=数据库读写分离>数据库读写分离</h2><p>实现 <code>读写分离</code> 分为两大步 :</p><ul><li><a href=https://www.jianshu.com/p/bfca0cdfb169 target=_blank rel=noopener>主从同步</a></li><li>读写分离;有两种方式 :<ul><li>通过程序实现,如TP框架,性能最好;</li><li>使用代理工具,如 :<ul><li><a href=https://www.jianshu.com/p/cb7ec06dae05 target=_blank rel=noopener>Mycat</a></li><li><a href=https://www.jianshu.com/p/cadf337274c1 target=_blank rel=noopener>Mysql-Proxy</a></li></ul></li></ul></li></ul><blockquote><p><code>mysql</code> 之间可相互主从同步,避免 <code>单点</code> ;当有主从数据库发生宕机,可使用 <code>percona-tooldit</code> 工具解决恢复宕机后主从数据不同步的问题
<a href=https://blog.51cto.com/moerjinrong/2352317>https://blog.51cto.com/moerjinrong/2352317</a></p></blockquote><p><code>Mysql-Proxy</code> 配置文件 <code>mysql-proxy.cnf</code> 参考 :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#f92672>[</span>mysql-proxy<span style=color:#f92672>]</span>
  <span style=color:#75715e>#运行mysql-proxy用户</span>
user<span style=color:#f92672>=</span>root
  <span style=color:#75715e>#主从mysql共有的用户</span>
admin-username<span style=color:#f92672>=</span>proxy
  <span style=color:#75715e>#用户的密码</span>
admin-password<span style=color:#f92672>=</span>root
  <span style=color:#75715e>#mysql-proxy运行ip(不能是127.0.0.1)和端口,不加端口,默认4040</span>
proxy-address<span style=color:#f92672>=</span>192.168.1.1:4040
  <span style=color:#75715e>#slave从数据库Ip地址,默认端口3306</span>
proxy-read-only-backend-addresses<span style=color:#f92672>=</span>192.168.1.2:3306
  <span style=color:#75715e>#master主数据库Ip地址,默认端口3306</span>
proxy-backend-addresses<span style=color:#f92672>=</span>192.168.1.3:3306
  <span style=color:#75715e>#读写分离配置文件</span>
proxy-lua-script<span style=color:#f92672>=</span>/usr/lib64/mysql-proxy/lua/rw-splitting.lua
  <span style=color:#75715e>#管理脚本</span>
admin-lua-script<span style=color:#f92672>=</span>/usr/lib64/mysql-proxy/lua/admin.lua
  <span style=color:#75715e>#日志</span>
log-file<span style=color:#f92672>=</span>/var/log/mysql-proxy.log
  <span style=color:#75715e>#日志级别,高到低有error|warning|info|message|debug</span>
log-level<span style=color:#f92672>=</span>info
  <span style=color:#75715e>#以守护进程方式运行</span>
daemon<span style=color:#f92672>=</span>true
  <span style=color:#75715e>#崩溃时,尝试重启</span>
keepalive<span style=color:#f92672>=</span>true

</code></pre></div><h2 id=数据库>数据库</h2><blockquote><p><code>mysql8</code> 特性 :</p><ul><li><code>utf8mb4</code> 储存表情符号</li><li>默认 <code>InnoDB</code></li><li>降序索引</li><li>JSON支持,直接操作json里的数据</li><li>跳过锁等待</li><li>用户角色管理权限</li><li><code>innodb_dedicated_server</code> 自适应参数,自动配置 <code>mysql</code></li></ul></blockquote><ul><li><p><code>redis</code> 只做缓存使用,避免进行 <code>持久性</code> && <code>队列</code> && <code>事务</code> (总之一句话:专人专事)</p></li><li><p><code>redis</code> 和 <code>DB</code> 一致性方案:只读 <code>redis</code> ,当更新 <code>DB</code> 之后把受影响的缓存全部干掉(注意:是干掉,不是更新),并且设定过期时间: <a href=https://www.zhihu.com/question/319817091>https://www.zhihu.com/question/319817091</a></p></li><li><p>出现不能连接数据库的情况,除了防火墙,也可能是数据库没有设置对外添加权限</p></li><li><p>出现用户不能登录的情况,可能是默认登录了 <code>匿名用户</code> , 要把用户名为 <code>''</code> 的用户清除</p></li><li><p><code>MyISAM</code> 存储引擎偏向于大量查询和插入事件,表锁</p></li><li><p><code>InnoDB</code> 存储引擎偏向于增删改事件,支持事务,支持索引行锁</p></li><li><p>索引才用 <code>for update</code> 锁库</p></li><li><p>数据库类型
<a href=http://www.jb51.net/article/55853.htm>http://www.jb51.net/article/55853.htm</a></p></li><li><p>免密码登录
<code>skip-grant-tables</code></p></li><li><p>性能测试
<code>explain select * from dnname</code></p></li><li><p>性能测试工具(mysql自带)
<code>mysqlslap ...</code></p></li><li><p>数据库导出
<code>mysqldump -uroot -p dbname > dbname.sql</code></p></li><li><p>新建数据库
<code>CREATE DATABASE mydb CHARACTER SET utf8 COLLATE utf8_general_ci</code></p></li><li><p>插入数据
<code>insert into $my_name (id,name,tel) values('2','tab',null)</code></p></li><li><p>删除数据
<code>delete from my_name where id = 1;</code></p></li><li><p>修改数据
<code>update my_name set id='2',name='tab' where id=1;</code></p></li><li><p>插入字段
<code>alter table my_name add id varchar(32)</code></p></li><li><p>删除字段
<code>alter table my_name drop id</code></p></li><li><p>去掉name重复的
<code>SELECT DISTINCT name FROM my_name</code></p></li><li><p>计算个数
<code>select count(*) from my_name</code></p></li><li><p>计算总和
<code>select sum(*) from my_name</code></p></li><li><p>计算平均
<code>select sum(*)/count(*) from my_name</code></p></li><li><p>计算平均
<code>select avg(name) from my_name</code></p></li><li><p>最小值
<code>select min(name) from my_name</code></p></li><li><p>双重查询,查询指定最小值对应的的所有字段
<code>SELECT * FROM my_name WHERE name=(SELECT max(name)FROM my_name)</code></p></li><li><p>根据指定字段分类
<code>select * from my_name group by name;</code></p></li><li><p>表的联合查询
<code>SELECT * FROM my_name as a INNER JOIN my_name2 as b on a.name=b.id</code></p></li><li><p>左查询,就是当my_name跟my_name2的的值不相对应则以my_name为主要,my_name2多出的值则省略
<code>SELECT * FROM my_name as a left outer JOIN my_name2 as b on a.name=b.id</code></p></li></ul><h2 id=php>PHP</h2><blockquote><p>php7特性</p><ul><li>用绝对路径</li><li>重定向后使用exit</li><li>array_walk</li><li>&引用节省内存</li><li>+= array()</li><li>isset($a{1})</li><li>$_SERVER[&lsquo;REQUEST_TIME&rsquo;]</li><li>strtr</li><li>高亮PHP代码highlight_file</li><li>2 &lt;=> 1</li><li>echo &ldquo;\u{41}",PHP_EOL;</li><li>use some\namespace{ClassA, ClassB, ClassC as C};</li><li>function arraysSum(int &mldr;$ints): string</li><li><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span>{<span style=color:#66d9ef>static</span> <span style=color:#66d9ef>private</span> $b <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;hello world&#39;</span>;}
 $bb <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (){<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>A</span><span style=color:#f92672>::</span>$b;};
 <span style=color:#66d9ef>echo</span> $bb<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>call</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>A</span>);
</code></pre></div></li></ul></blockquote><ul><li>bug<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php>[] <span style=color:#f92672>==</span> []; <span style=color:#75715e>//为false
</span><span style=color:#75715e></span>
<span style=color:#e6db74>&#39;a&#39;</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>;

$a <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;0.3&#39;</span> <span style=color:#f92672>-</span> <span style=color:#e6db74>&#39;0.1&#39;</span>;
<span style=color:#a6e22e>json_encode</span>($a);
<span style=color:#ae81ff>0.55</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>55</span>; <span style=color:#75715e>//为false
</span></code></pre></div></li><li>json_encode((array)$array, JSON_UNESCAPED_UNICODE|JSON_UNESCAPED_SLASHES|JSON_PRETTY_PRINT)</li><li>有时候exec命令执行失败,却没有报错,请这样使用:<code>exec('ls 2>&1', $a, $b)</code></li><li><code>fastcgi</code>就是执行 <code>cgi协议</code> 的,用于定义 <code>Nginx</code> 调用 <code>php</code> 时的数据格式,并减少对 <code>php.ini</code> 的读取</li><li><code>php-fpm</code>就是 <code>Nginx</code> 服务调用的程序,管理 <code>fastcgi</code> 进程</li><li><code>php-cli</code>就是 <code>shell</code> 命令行调用的程序</li><li><code>|||nochange|||</code>表示 <code>input</code> 输入框为空</li><li><code>htmlentities</code> / <code>htmlspecialchars</code> 可以过滤成 <code>html格式</code> , 防止 <code>XSS</code></li><li><code>addslashes</code> 防止 <code>sql注入</code></li><li><code>explain</code> 用于测试 <code>sql语句</code> 性能</li><li>引用字符串方式: <code>Nowdoc</code> / <code>Heredoc</code></li><li>中文简体格式
<code>header('Content-type:text/html;charset=utf-8')</code></li><li>解决textarea标签回车编码问题
<code>str_replace(" "," ",str_replace("\n","&lt;br/>",$data))</code></li><li>单入口写上: <code>session_start()</code> 才可以使用 <code>$_SESSION</code></li><li>跳转到#页面
<code>header('Location:#')</code></li><li>php格式插入html遍历<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> <span style=color:#66d9ef>foreach</span> ($my_name <span style=color:#66d9ef>as</span> $x <span style=color:#f92672>=&gt;</span> $y){ <span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>    &lt;li&gt;&lt;?php echo $y[&#39;z&#39;] ?&gt;&lt;/li&gt;
</span><span style=color:#960050;background-color:#1e0010>&lt;?php } ?&gt;
</span></code></pre></div></li><li>解决ajax夸域<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Access-Control-Allow-Origin:demain.com&#39;</span>); <span style=color:#75715e>//可以用*允许所有
</span><span style=color:#75715e></span><span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Content-Type:application/json; charset=utf-8&#39;</span>);
<span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Access-Control-Allow-Methods: GET, POST, DELETE&#39;</span>);
<span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#39;Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept&#39;</span>);
</code></pre></div></li><li>内容返回<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#a6e22e>ob_start</span>(); <span style=color:#75715e>//开启echo缓存区
</span><span style=color:#75715e></span><span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;Hello&#34;</span>; <span style=color:#75715e>//输出
</span><span style=color:#75715e></span><span style=color:#a6e22e>ob_end_flush</span>(); <span style=color:#75715e>//输出全部内容到浏览器,包括echo
</span></code></pre></div></li></ul><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>rand(x,y)</td><td>在xy之间取随机数</td></tr><tr><td>implode(&lsquo;xx&rsquo;,'$my_name')</td><td>用xx隔开my_name中每个元素</td></tr><tr><td>explode()</td><td>把字符串打散为数组.</td></tr><tr><td>arry_merge()</td><td>打散混乱数组重新排列</td></tr><tr><td>in_array($xy,$my_name)</td><td>数组$my_name是否含$xy</td></tr><tr><td>mb_substr($my_name,x,y,&lsquo;utf-8&rsquo;)</td><td>截取字符串,从第x个字符开始截取y个字符</td></tr><tr><td>strtotime()</td><td>将任何英文文本的日期或时间描述解析为 Unix 时间戳.</td></tr><tr><td>字符串类型</td><td>&ndash;</td></tr><tr><td>addcslashes()</td><td>返回在指定的字符前添加反斜杠的字符串.</td></tr><tr><td>addslashes()</td><td>返回在预定义的字符前添加反斜杠的字符串.</td></tr><tr><td>chop()</td><td>删除字符串右侧的空白字符或其他字符..</td></tr><tr><td>chunk_split()</td><td>把字符串分割为一系列更小的部分.</td></tr><tr><td>html_entity_decode()</td><td>把 HTML 实体转换为字符.</td></tr><tr><td>htmlentities()</td><td>把字符转换为 HTML 实体.</td></tr><tr><td>htmlspecialchars_decode()</td><td>把一些预定义的 HTML 实体转换为字符.</td></tr><tr><td>htmlspecialchars()</td><td>把一些预定义的字符转换为 HTML 实体.</td></tr><tr><td>join()</td><td>implode() 的别名.</td></tr><tr><td>ltrim()</td><td>移除字符串左侧的空白字符或其他字符.</td></tr><tr><td>md5()</td><td>计算字符串的 MD5 散列.</td></tr><tr><td>number_format()</td><td>以千位分组来格式化数字.</td></tr><tr><td>parse_str()</td><td>把查询字符串解析到变量中.</td></tr><tr><td>rtrim()</td><td>移除字符串右侧的空白字符或其他字符.</td></tr><tr><td>sha1()</td><td>计算字符串的 SHA-1 散列.</td></tr><tr><td>similar_text()</td><td>计算两个字符串的相似度.</td></tr><tr><td>sprintf()</td><td>把格式化的字符串写入变量中.</td></tr><tr><td>str_pad()</td><td>把字符串填充为新的长度.</td></tr><tr><td>str_repeat()</td><td>把字符串重复指定的次数.</td></tr><tr><td>str_replace()</td><td>替换字符串中的一些字符(对大小写敏感)</td></tr><tr><td>str_shuffle()</td><td>随机地打乱字符串中的所有字符.</td></tr><tr><td>str_split()</td><td>把字符串分割到数组中.</td></tr><tr><td>strip_tags()</td><td>剥去字符串中的 HTML 和 PHP 标签.</td></tr><tr><td>stripcslashes()</td><td>删除由 addcslashes() 函数添加的反斜杠.</td></tr><tr><td>stripslashes()</td><td>删除由 addslashes() 函数添加的反斜杠.</td></tr><tr><td>stripos()</td><td>返回字符串第一次出现的位置(大小写不敏感)</td></tr><tr><td>strpos()</td><td>返回字符串第一次出现的位置(大小写敏感)</td></tr><tr><td>stristr()</td><td>查找字符串第一次出现的位置(大小写不敏感)</td></tr><tr><td>strrchr()</td><td>查找字符串最后一次出现.</td></tr><tr><td>strripos()</td><td>查找字符串最后一次出现的位置(大小写不敏感)</td></tr><tr><td>strrpos()</td><td>查找字符串最后一次出现的位置(大小写敏感)</td></tr><tr><td>strstr()</td><td>查找字符串第一次出现(大小写敏感)</td></tr><tr><td>strchr()</td><td>查找字符串第一次出现,strstr() 的别名</td></tr><tr><td>strrev()</td><td>反转字符串.</td></tr><tr><td>strlen()</td><td>返回字符串的长度.</td></tr><tr><td>strtolower()</td><td>把字符串转换为小写字母.</td></tr><tr><td>strtoupper()</td><td>把字符串转换为大写字母.</td></tr><tr><td>strtr()</td><td>转换字符串中特定的字符.</td></tr><tr><td>substr()</td><td>返回字符串的一部分.</td></tr><tr><td>substr_count()</td><td>计算子串在字符串中出现的次数.</td></tr><tr><td>substr_replace()</td><td>把字符串的一部分替换为另一个字符串.</td></tr><tr><td>ucfirst()</td><td>把字符串中的首字符转换为大写.</td></tr><tr><td>ucwords()</td><td>把字符串中每个单词的首字符转换为大写.</td></tr><tr><td>数组函数</td><td>&ndash;</td></tr><tr><td>array_change_key_case()</td><td>把数组中所有键更改为小写或大写.</td></tr><tr><td>array_chunk()</td><td>把一个数组分割为新的数组块.</td></tr><tr><td>array_column()</td><td>返回输入数组中某个单一列的值.</td></tr><tr><td>array_combine()</td><td>通过合并两个数组来创建一个新数组.</td></tr><tr><td>array_count_values()</td><td>用于统计数组中所有值出现的次数.</td></tr><tr><td>array_diff()</td><td>比较数组,返回差集(只比较键值)</td></tr><tr><td>array_fill()</td><td>用给定的键值填充数组.</td></tr><tr><td>array_fill_keys()</td><td>用指定键名的给定键值填充数组.</td></tr><tr><td>array_filter()</td><td>用回调函数过滤数组中的元素.</td></tr><tr><td>array_flip()</td><td>交换数组中的键和值.</td></tr><tr><td>array_intersect()</td><td>比较数组,返回交集(只比较键值)</td></tr><tr><td>array_key_exists()</td><td>检查指定的键名是否存在于数组中.</td></tr><tr><td>array_keys()</td><td>返回数组中所有的键名.</td></tr><tr><td>array_map()</td><td>把数组中的每个值发送到用户自定义函数,返回新的值.</td></tr><tr><td>array_merge()</td><td>把一个或多个数组合并为一个数组.</td></tr><tr><td>array_multisort()</td><td>对多个数组或多维数组进行排序.</td></tr><tr><td>array_pad()</td><td>用值将数组填补到指定长度.</td></tr><tr><td>array_pop()</td><td>删除数组的最后一个元素(出栈)</td></tr><tr><td>array_push()</td><td>将一个或多个元素插入数组的末尾(入栈)</td></tr><tr><td>array_replace()</td><td>使用后面数组的值替换第一个数组的值.</td></tr><tr><td>array_reverse()</td><td>以相反的顺序返回数组.</td></tr><tr><td>array_search()</td><td>搜索数组中给定的值并返回键名.</td></tr><tr><td>array_shift()</td><td>删除数组中首个元素,并返回被删除元素的值.</td></tr><tr><td>array_slice()</td><td>返回数组中被选定的部分.</td></tr><tr><td>array_splice()</td><td>删除并替换数组中指定的元素.</td></tr><tr><td>array_sum()</td><td>返回数组中值的和.</td></tr><tr><td>array_udiff()</td><td>比较数组,返回差集</td></tr><tr><td>array_unique()</td><td>删除数组中的重复值.(集合的概念)</td></tr><tr><td>array_unshift()</td><td>在数组开头插入一个或多个元素.</td></tr><tr><td>array_values()</td><td>返回数组中所有的值.</td></tr><tr><td>arsort()</td><td>对关联数组按照键值进行降序排序.</td></tr><tr><td>asort()</td><td>对关联数组按照键值进行升序排序.</td></tr><tr><td>compact()</td><td>创建包含变量名和它们的值的数组.</td></tr><tr><td>count()</td><td>返回数组中元素的数目.</td></tr><tr><td>current()</td><td>返回数组中的当前元素.</td></tr><tr><td>extract()</td><td>从数组中将变量导入到当前的符号表.</td></tr><tr><td>in_array()</td><td>检查数组中是否存在指定的值.</td></tr><tr><td>key()</td><td>从关联数组中取得键名.</td></tr><tr><td>krsort()</td><td>对数组按照键名逆向排序.</td></tr><tr><td>ksort()</td><td>对数组按照键名排序.</td></tr><tr><td>list()</td><td>把数组中的值赋给一些变量.</td></tr><tr><td>range()</td><td>创建包含指定范围单元的数组.</td></tr><tr><td>rsort()</td><td>对数组逆向排序.</td></tr><tr><td>shuffle()</td><td>将数组打乱.</td></tr><tr><td>sizeof()</td><td>count() 的别名.</td></tr><tr><td>sort()</td><td>对数组排序.</td></tr><tr><td>uasort()</td><td>使用用户自定义的比较函数对数组中的键值进行排序.</td></tr><tr><td>uksort()</td><td>使用用户自定义的比较函数对数组中的键名进行排序.</td></tr><tr><td>usort()</td><td>使用用户自定义的比较函数对数组进行排序.</td></tr></tbody></table><h2 id=前端>前端</h2><ul><li>可以设置类似<code>cookie</code> , 它可永久保存
<code>localStorage.setItem(name, val)</code></li><li>死链
<code>&lt;a href="javascript:void(0);"></code></li><li>CSS加载JS样式
<code>behavior:url()</code></li><li>选择div内第二个li,类似js
<code>div li:first-child+li{}</code></li><li>选择form下类型为text的input标签
<code>form input[type="text"]{}</code></li><li>居中CSS背景图片
<code>background-position:center</code></li><li>居中HTML图片
<code>&lt;div align="center">&lt;img src=""></code></li><li>居中div
<code>{top:0;left:0;bottom:0;right:0;margin:auto}/margin:0 auto;</code></li><li>单行文字水平/垂直居中
<code>text-decoration:center;/line-height:10px;</code></li><li>多行文字垂直居中:div1>div2>p
<code>div1{display:table;/*转换成表格*/} div2{display:table-cell;vertical-align:middle;}</code></li><li>li中间向两边分布
<code>ul{text-align:center}li{display: inline-block;}</code></li><li>li水平分布,ul宽度平均分割给li
<code>ul{display:flex}li{flex:1;text-align:center}</code></li><li>li水平分布,类似最左和最右浮动两边的效果
<code>div{overflow:hidden;width:11px} div ul{width:12px} li{width:5px;margin_right:1px}</code></li><li>轮播图不能有滚动条
<code>在ul父级加overflow:hidden;width:100%;position: relative;//position用于ul居中</code></li><li>清除浮动,class是my_name就可以清除浮动
<code>.my_name:after{content:""; display:block; height:0; visibility:hidden; clear:both;}</code></li><li>鼠标悬浮图片放大
<code>.div:hover img{transform: scale(1.03);transition: all 1s ease 0s;-webkit-transform: scale(1.03);-webkit-transform: all 1s ease 0s;}</code></li><li>iframe高度<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>=</span> window,
    <span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;inner&#39;</span>,
    <span style=color:#a6e22e>$header</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;.header&#34;</span>);<span style=color:#75715e>//如果页面有头部,则要减去
</span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>(<span style=color:#e6db74>&#39;innerWidth&#39;</span> <span style=color:#66d9ef>in</span> window)) {
    <span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;client&#39;</span>;
    <span style=color:#a6e22e>e</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>documentElement</span> <span style=color:#f92672>||</span> document.<span style=color:#a6e22e>body</span>;
}
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>e</span>[<span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;Height&#39;</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>$header</span>.<span style=color:#a6e22e>outerHeight</span>();
<span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;.iframe&#34;</span>).<span style=color:#a6e22e>css</span>({
    <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>height</span>,
    <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;100%&#34;</span>
});
</code></pre></div></li></ul><p><strong>&mldr; 以上</strong></p></div><div class=article-tags><a class="badge badge-light" href=/tags/note/>Note</a></div><section id=comments><div id=container></div><link rel=stylesheet href=https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.css integrity="sha512-0hsIlRjJbiUWaKMhXXNDmjWI2qPvUlhNBLHMhqeF5jIma+bedec27N5FoT2JEeHz5TUmOGCsm1Y89EsX/P0wOg=="><script src=https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.js integrity="sha512-EcTCcXV46teiNwe0VcnM5A038tcY+BaQYO4nW6Gh2i7v4/HjBVg7xx3+JBLl9WofDds//INJAiEGAtdgr8PWyA=="></script><script>var gitalk=new Gitalk({repo:"twbworld.GitHub.io",owner:"twbworld",admin:["twbworld"],id:window.location.pathname.match(/\w+/g).pop().slice(-50),clientID:"a8bef379318b69f91ee5",clientSecret:"efdbcdaea767631fb232dd600e8f593d7652403c"});gitalk.render('container')</script></section></div></main></div></div></article></div><div class=page-footer><div class="home-section bg-image parallax" style=background-color:initial><footer class=site-footer><ul class="network-icon powered-by" style=text-align:center;display:block aria-hidden=true><li style=display:inline-block><a href=https://github.com/twbworld title=github target=_blank rel=noopener><i class="fab fa-github big-icon"></i></a></li><li style=display:inline-block><a href=https://twitter.com/twbworld title=twitter target=_blank rel=noopener><i class="fab fa-twitter big-icon"></i></a></li><li style=display:inline-block><a href=https://www.instagram.com/twbworld title=instagram target=_blank rel=noopener><i class="fab fa-instagram big-icon"></i></a></li><li style=display:inline-block><a href=http://weibo.com/u/2646212535 title=weibo target=_blank rel=noopener><i class="fab fa-weibo big-icon"></i></a></li><li style=display:inline-block><a href=https://www.zhihu.com/people/tan-te-41 title=zhihu target=_blank rel=noopener><i class="fab fa-zhihu big-icon"></i></a></li></ul><p class=powered-by><a href=/authors/admin/><img src=https://img.shields.io/badge/%C2%A9-2020%20%2D-%202021_%E5%BF%90%E5%BF%91-yellow alt=忐忑的博客></a> <a href=javascript:void(0) id=shields-views></a><br><a href=https://github.com/twbworld/twbworld.GitHub.io><img src="https://img.shields.io/github/tag/twbworld/twbworld.GitHub.io?logo=github" alt=忐忑的博客></a> <a href=https://gohugo.io/><img src="https://img.shields.io/badge/powered-hugo-ff4088?logo=hugo" alt=Hugo></a> <a href=https://wowchemy.com/><img src=https://img.shields.io/badge/theme-wowchemy-00d1b2 alt=wowchemy></a></p><p class=powered-by><span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>引用</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> 复制</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> 下载</a><div id=modal-error></div></div></div></div></div><script src=https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdn.staticfile.org/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdn.staticfile.org/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdn.staticfile.org/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js integrity></script><script type=text/javascript>window.onload=function(){const b=document.getElementById("busuanzi_value_site_pv").innerHTML,a=document.createElement('img');a.alt='Hi !',a.title='Hi !',a.src='https://img.shields.io/badge/views-'+b+'-purple',document.getElementById('shields-views').appendChild(a)}</script><span id=busuanzi_container_site_pv><span id=busuanzi_value_site_pv style=display:none!important>*</span></span>
<script src=https://cdn.staticfile.org/mermaid/8.8.4/mermaid.min.js integrity="sha512-as1BF4+iHZ3BVO6LLDQ7zrbvTXM+c/1iZ1qII/c3c4L8Rn5tHLpFUtpaEtBNS92f+xGsCzsD7b62XP3XYap6oA==" crossorigin=anonymous title=mermaid></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/php.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/php-template.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/go.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/python.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/css.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/javascript.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/shell.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/bash.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/json.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/yaml.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/xml.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/nginx.min.js></script><script src=https://cdn.staticfile.org/highlight.js/10.2.0/languages/sql.min.js></script><script src=https://cdn.staticfile.org/leaflet/1.7.1/leaflet.min.js integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin=anonymous></script><script id=search-hit-fuse-template type=text/x-template>
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script><script src=https://cdn.staticfile.org/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdn.staticfile.org/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/twbworld/twbworld.GitHub.io@gh-pages/js/_vendor/bootstrap.bundle.min.f8467c1d3e2740d8f3195894a328004e.js></script><script src=https://cdn.jsdelivr.net/gh/twbworld/twbworld.GitHub.io@gh-pages/zh/js/wowchemy.min.de940c023919d45018fdcd2e39012788.js></script></body></html>